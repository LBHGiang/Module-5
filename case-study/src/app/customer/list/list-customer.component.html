<app-navbar-customer></app-navbar-customer>
<div class="container-fluid">
  <div class="row" style="width: 100%; padding: 0; margin: 0;">

    <!--    Modal thông báo-->
    <div *ngIf="message">
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="exampleModalLabel">Thông báo</h4>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              {{message}}
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <h1 style="text-align: center; color: blue">Danh sách khách hàng</h1>

    <table id="customer_table" class="table table-striped table-bordered" style="width: 100%">
      <thead>
      <tr>
        <th>STT</th>
        <th>Tên</th>
        <th>CMND</th>
        <th>Giới tính</th>
        <th>SĐT</th>
        <th>Email</th>
        <th>Loại khách</th>
        <th>Chỉnh sửa</th>
        <th>Xóa</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let customer of customers; index as i">
        <td>{{i + 1}}</td>

        <!--                Send To Detail Modal-->
        <td><a type="button" class="view" style="border: none; background: transparent; outline: none"
               data-bs-toggle="modal" (click)="sendToDetailModal(customer.id)"
               data-bs-target="#viewModal">
          <span class="text-decoration-underline">{{customer.name}}</span>
        </a></td>

        <td>{{customer.idCard}}</td>

        <td [ngSwitch]="customer.gender">
          <span *ngSwitchCase="0">Nam</span>
          <span *ngSwitchCase="1">Nữ</span>
          <span *ngSwitchDefault>Khác</span>
        </td>

        <td>{{customer.phone}}</td>
        <td>{{customer.email}}</td>
        <td>{{customer.customerType}}</td>

        <td><a [routerLink]="['/customer/edit/',customer.id]" type="button"
               class="btn btn-warning">CHỈNH SỬA</a></td>

        <!--               Send to delete Modal-->
        <td>
          <a type="button" class="deleteConfirm btn btn-danger" data-bs-toggle="modal"
              data-bs-target="#deleteModal">
            Xóa
          </a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Detail Modal -->
<div *ngIf="customerDetail" class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-info">
        <h1 class="modal-title fs-5">Thông tin chi tiết</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal"
                aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <fieldset>
          <table class="table" style="width: 100%">
            <tr>
              <td>Tên</td>
              <td>{{customerDetail.name}}</td>
            </tr>
            <tr>
              <td>Ngày sinh</td>
              <td>{{customerDetail.dayOfBirth}}</td>
            </tr>
            <tr>
              <td>Giới tính</td>
              <td>{{customerDetail.gender}}</td>
            </tr>
            <tr>
              <td>CMND</td>
              <td>{{customerDetail.idCard}}</td>
            </tr>
            <tr>
              <td>SĐT</td>
              <td>{{customerDetail.phone}}</td>
            </tr>
            <tr>
              <td>Email</td>
              <td>{{customerDetail.email}}</td>
            </tr>
            <tr>
              <td>Địa chỉ</td>
              <td>{{customerDetail.address}}</td>
            </tr>
            <tr>
              <td>Loại khách</td>
              <td>{{customerDetail.customerType}}</td>
            </tr>
            <tr>
              <td></td>
              <td>
                <div class="modal-footer">
                  <button class="btn btn-secondary" data-bs-dismiss="modal">Quay
                    lại
                  </button>
                </div>
              </td>
            </tr>
          </table>
        </fieldset>
      </div>
    </div>
  </div>
</div>
